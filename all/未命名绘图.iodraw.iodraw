<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1080px" height="1138px" viewBox="-0.5 -0.5 1080 1138" content="&lt;mxfile host=&quot;www.iodraw.com&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0&quot; version=&quot;24.7.17&quot;&gt;&#10;  &lt;diagram name=&quot;第 1 页&quot; id=&quot;nNfZEDD0_aFGkovQccNz&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1965&quot; dy=&quot;1253&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-14&quot; value=&quot;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;110&quot; y=&quot;52&quot; width=&quot;950&quot; height=&quot;318&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-15&quot; value=&quot;uniad_test_planner&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;13&quot; y=&quot;3&quot; width=&quot;120&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-16&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot; style=&amp;quot;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体; font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot; style=&amp;quot;color: rgb(0, 0, 0);&amp;quot;&amp;gt;outputs = custom_multi_gpu_test（model， data_loader， args.tmpdir，args.gpu_collect）&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;amp;lt;br/&amp;amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;font-size:12.0000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;220&quot; y=&quot;80&quot; width=&quot;340&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-17&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;color: rgb(0, 0, 0);&amp;quot; face=&amp;quot;Times New Roman&amp;quot;&amp;gt;result = model(return_loss=False, rescale=True, **data)&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;220&quot; y=&quot;154&quot; width=&quot;340&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-18&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体; font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot; style=&amp;quot;color: rgb(0, 0, 0);&amp;quot;&amp;gt;return self.forward_test(**kwargs)&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;220&quot; y=&quot;227&quot; width=&quot;340&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-19&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; parent=&quot;1&quot; source=&quot;H9LpD67TrQ5rv2mn7AtS-20&quot; target=&quot;H9LpD67TrQ5rv2mn7AtS-21&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-20&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体; font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot; style=&amp;quot;color: rgb(0, 0, 0);&amp;quot;&amp;gt;result_planning=self.planning_head.forward_test(bev_embed, outs_motion, outs_occ, command)&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;170&quot; y=&quot;300&quot; width=&quot;440&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-21&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;color: rgb(0, 0, 0);&amp;quot; face=&amp;quot;Times New Roman&amp;quot;&amp;gt;outs_planning=self(bev_embed,occ_mask,bev_pos,sdc_traj_query, sdc_track_query, command)&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;html=1;whiteSpace=wrap;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;170&quot; y=&quot;399&quot; width=&quot;440&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-22&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; parent=&quot;1&quot; source=&quot;H9LpD67TrQ5rv2mn7AtS-16&quot; target=&quot;H9LpD67TrQ5rv2mn7AtS-17&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;350&quot; y=&quot;260&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;400&quot; y=&quot;210&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-23&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; parent=&quot;1&quot; source=&quot;H9LpD67TrQ5rv2mn7AtS-17&quot; target=&quot;H9LpD67TrQ5rv2mn7AtS-18&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;350&quot; y=&quot;260&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;400&quot; y=&quot;210&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-2&quot; value=&quot;v&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;110&quot; y=&quot;476&quot; width=&quot;950&quot; height=&quot;664&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-24&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; parent=&quot;1&quot; source=&quot;H9LpD67TrQ5rv2mn7AtS-18&quot; target=&quot;H9LpD67TrQ5rv2mn7AtS-20&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;350&quot; y=&quot;260&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;400&quot; y=&quot;210&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-25&quot; value=&quot;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;test跳转planner模块&amp;lt;/font&amp;gt;&quot; style=&quot;text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;110&quot; y=&quot;70&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-26&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;lt;br/&amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;font-size:12.0000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\apis\test.py-&amp;amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;lt;br/&amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;color:rgb(0,0,255);font-size:12.0000pt;&amp;lt;br/&amp;gt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体; font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;custom_multi_gpu_test&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;800&quot; y=&quot;154&quot; width=&quot;80&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-27&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;lt;br/&amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;font-size:12.0000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad_e2e.py-&amp;amp;gt;forward&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;745&quot; y=&quot;227&quot; width=&quot;190&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;H9LpD67TrQ5rv2mn7AtS-28&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;lt;br/&amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;font-size:12.0000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\tools\test.py-&amp;amp;gt;main&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;760&quot; y=&quot;79&quot; width=&quot;160&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;UserObject label=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体; color: rgb(0, 0, 0); font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad_e2e.py&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;amp;lt;br/&amp;amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;font-size:12.0000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;-&amp;amp;gt;forward_test&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; link=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;#xa;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;color:rgb(0,0,0);font-size:12.0000pt;&amp;#xa;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad_e2e.py&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;#xa;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;font-size:12.0000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;-&amp;amp;gt;forward_test&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; id=&quot;H9LpD67TrQ5rv2mn7AtS-29&quot;&gt;&#10;          &lt;mxCell style=&quot;text;whiteSpace=wrap;html=1;align=center;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;            &lt;mxGeometry x=&quot;685&quot; y=&quot;300&quot; width=&quot;310&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;          &lt;/mxCell&gt;&#10;        &lt;/UserObject&gt;&#10;        &lt;UserObject label=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(0, 0, 0); font-size: 12pt;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;&amp;quot; face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&amp;amp;gt;forward_test&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体; font-size: 12pt; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&amp;quot;&amp;gt;函数&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; link=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;#xa;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;color:rgb(0,0,0);font-size:12.0000pt;&amp;#xa;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&amp;amp;gt;forward_test&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; id=&quot;H9LpD67TrQ5rv2mn7AtS-30&quot;&gt;&#10;          &lt;mxCell style=&quot;text;whiteSpace=wrap;html=1;align=center;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;            &lt;mxGeometry x=&quot;760&quot; y=&quot;383&quot; width=&quot;200&quot; height=&quot;90&quot; as=&quot;geometry&quot; /&gt;&#10;          &lt;/mxCell&gt;&#10;        &lt;/UserObject&gt;&#10;        &lt;UserObject label=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;amp;lt;br/&amp;amp;gt;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;color:rgb(0,0,0);font-size:12.0000pt;&amp;amp;lt;br/&amp;amp;gt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&amp;amp;gt;forward&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; link=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:宋体;mso-ascii-font-family:&amp;#39;Times New Roman&amp;#39;;&amp;#xa;mso-hansi-font-family:&amp;#39;Times New Roman&amp;#39;;color:rgb(0,0,0);font-size:12.0000pt;&amp;#xa;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font face=&amp;quot;Times New Roman&amp;quot;&amp;gt;UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&amp;amp;gt;forward&amp;lt;/font&amp;gt;&amp;lt;font face=&amp;quot;宋体&amp;quot;&amp;gt;函数&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; id=&quot;H9LpD67TrQ5rv2mn7AtS-31&quot;&gt;&#10;          &lt;mxCell style=&quot;text;whiteSpace=wrap;html=1;align=center;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;            &lt;mxGeometry x=&quot;684&quot; y=&quot;476&quot; width=&quot;290&quot; height=&quot;90&quot; as=&quot;geometry&quot; /&gt;&#10;          &lt;/mxCell&gt;&#10;        &lt;/UserObject&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-1&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:华文琥珀;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;plan_query = torch.cat([sdc_traj_query, sdc_track_query, navi_embed], dim=-1)&amp;amp;nbsp;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:华文琥珀;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;185&quot; y=&quot;566&quot; width=&quot;410&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-3&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;plan_query = self.mlp_fuser(plan_query).max(1, keepdim=True)[0]&amp;amp;nbsp;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;185&quot; y=&quot;666&quot; width=&quot;410&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-4&quot; value=&quot;&amp;lt;p style=&amp;quot;font-size: 16px;&amp;quot; class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;plan_query = self.attn_module( plan_query, bev_fea&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;font-family: 宋体;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot; face=&amp;quot;Times New Roman&amp;quot;&amp;gt;t&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;amp;nbsp;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;185&quot; y=&quot;765&quot; width=&quot;410&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-5&quot; value=&quot;&amp;lt;p style=&amp;quot;font-size: 16px;&amp;quot; class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;s&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;dc_traj_all = self.reg_branch(plan_query).view( (-1, self.planning_steps, 2))&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;185&quot; y=&quot;862&quot; width=&quot;410&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-6&quot; value=&quot;&amp;lt;p style=&amp;quot;font-size: 16px;&amp;quot; class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;quot;Times New Roman&amp;amp;quot;;&amp;quot;&amp;gt;if self.use_col_optim and not self.training:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;quot;Times New Roman&amp;amp;quot;;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p style=&amp;quot;font-size: 16px;&amp;quot; class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;sdc_traj_all = self.collision_optimization( sdc_traj_all, occ_mask)&amp;amp;nbsp;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;amp;lt;br/&amp;amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;185&quot; y=&quot;954&quot; width=&quot;410&quot; height=&quot;90&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-7&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;H9LpD67TrQ5rv2mn7AtS-21&quot; target=&quot;2zAw07tLLCjVrzlMsrer-1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;690&quot; y=&quot;730&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;740&quot; y=&quot;680&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-9&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-1&quot; target=&quot;2zAw07tLLCjVrzlMsrer-3&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;580&quot; y=&quot;810&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;630&quot; y=&quot;760&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-10&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-3&quot; target=&quot;2zAw07tLLCjVrzlMsrer-4&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;580&quot; y=&quot;810&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;630&quot; y=&quot;760&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-11&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-4&quot; target=&quot;2zAw07tLLCjVrzlMsrer-5&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;580&quot; y=&quot;810&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;630&quot; y=&quot;760&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-12&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-5&quot; target=&quot;2zAw07tLLCjVrzlMsrer-6&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;580&quot; y=&quot;810&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;630&quot; y=&quot;760&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-13&quot; value=&quot;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;自车轨迹+自车跟踪+导航指令=规划查询Q&amp;lt;/font&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;694&quot; y=&quot;566&quot; width=&quot;310&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-14&quot; value=&quot;&amp;lt;span style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;规划查询Q-&amp;amp;gt;MLP+maxpool层&amp;lt;/span&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;694&quot; y=&quot;666&quot; width=&quot;310&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-15&quot; value=&quot;&amp;lt;span style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;规划查询Q+BEV特征-&amp;amp;gt;cross attention层交互&amp;lt;/span&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;694&quot; y=&quot;765&quot; width=&quot;310&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-16&quot; value=&quot;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;规划查询Q-&amp;amp;gt;MLP层解码轨迹&amp;lt;/font&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;694&quot; y=&quot;862&quot; width=&quot;310&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-17&quot; value=&quot;&amp;lt;span style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;测试环节使用最优化：规划轨迹-&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;quot;Times New Roman&amp;amp;quot;; font-size: 16px;&amp;quot;&amp;gt;collision_optimization碰撞优化函数&amp;lt;/span&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;694&quot; y=&quot;969&quot; width=&quot;310&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-18&quot; value=&quot;&amp;lt;p class=&amp;quot;MsoNormal&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;quot;Times New Roman&amp;amp;quot;;&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;sdc_traj_all&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;mso-spacerun:&amp;#39;yes&amp;#39;;font-family:&amp;#39;Times New Roman&amp;#39;;mso-fareast-font-family:宋体;&amp;lt;br/&amp;gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;322&quot; y=&quot;1074&quot; width=&quot;135&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-19&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-6&quot; target=&quot;2zAw07tLLCjVrzlMsrer-18&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;580&quot; y=&quot;1070&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;630&quot; y=&quot;1020&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-21&quot; value=&quot;&amp;lt;font style=&amp;quot;font-size: 16px;&amp;quot;&amp;gt;planner模块&amp;lt;/font&amp;gt;&quot; style=&quot;text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;120&quot; y=&quot;490&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-22&quot; value=&quot;&quot; style=&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-1&quot; target=&quot;2zAw07tLLCjVrzlMsrer-13&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;570&quot; y=&quot;840&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;620&quot; y=&quot;790&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-23&quot; value=&quot;&quot; style=&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-3&quot; target=&quot;2zAw07tLLCjVrzlMsrer-14&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;570&quot; y=&quot;840&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;620&quot; y=&quot;790&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-24&quot; value=&quot;&quot; style=&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-4&quot; target=&quot;2zAw07tLLCjVrzlMsrer-15&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;570&quot; y=&quot;840&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;620&quot; y=&quot;790&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-25&quot; value=&quot;&quot; style=&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-5&quot; target=&quot;2zAw07tLLCjVrzlMsrer-16&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;570&quot; y=&quot;990&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;620&quot; y=&quot;940&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;2zAw07tLLCjVrzlMsrer-26&quot; value=&quot;&quot; style=&quot;endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;2zAw07tLLCjVrzlMsrer-6&quot; target=&quot;2zAw07tLLCjVrzlMsrer-17&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;570&quot; y=&quot;990&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;620&quot; y=&quot;940&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-14"><g><rect x="97" y="49" width="950" height="318" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-15"><g><rect x="0" y="0" width="120" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">uniad_test_planner</div></div></div></foreignObject><text x="60" y="24" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">uniad_test_planner</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-16"><g><rect x="207" y="77" width="340" height="50" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 102px; margin-left: 208px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="" class="MsoNormal"><span style="font-family: 宋体; font-size: 12pt;"><font style="color: rgb(0, 0, 0);" face="Times New Roman">outputs = custom_multi_gpu_test（model， data_loader， args.tmpdir，args.gpu_collect）</font></span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';font-size:12.0000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="106" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">outputs = custom_multi_gpu_test（model， data_loader， args.tm...</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-17"><g><rect x="207" y="151" width="340" height="50" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 176px; margin-left: 208px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="font-size: 12pt;"><font face="Times New Roman" style="color: rgb(0, 0, 0);">result = model(return_loss=False, rescale=True, **data)</font></span></p></div></div></div></foreignObject><text x="377" y="180" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">result = model(return_loss=False, rescale=True, **data)</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-18"><g><rect x="207" y="224" width="340" height="50" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 249px; margin-left: 208px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="font-family: 宋体; font-size: 12pt;"><font style="color: rgb(0, 0, 0);" face="Times New Roman">return self.forward_test(**kwargs)</font></span></p></div></div></div></foreignObject><text x="377" y="253" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">return self.forward_test(**kwargs)</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-19"><g><path d="M 377 347 L 377 389.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 394.88 L 373.5 387.88 L 377 389.63 L 380.5 387.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-20"><g><rect x="157" y="297" width="440" height="50" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 322px; margin-left: 158px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="font-family: 宋体; font-size: 12pt;"><font style="color: rgb(0, 0, 0);" face="Times New Roman">result_planning=self.planning_head.forward_test(bev_embed, outs_motion, outs_occ, command)</font></span></p></div></div></div></foreignObject><text x="377" y="326" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">result_planning=self.planning_head.forward_test(bev_embed, outs_motion, o...</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-21"><g><rect x="157" y="396" width="440" height="50" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 421px; margin-left: 158px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="font-size: 12pt;"><font face="Times New Roman" style="color: rgb(0, 0, 0);">outs_planning=self(bev_embed,occ_mask,bev_pos,sdc_traj_query, sdc_track_query, command)</font></span></p></div></div></div></foreignObject><text x="377" y="425" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">outs_planning=self(bev_embed,occ_mask,bev_pos,sdc_traj_query, sdc_track_q...</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-22"><g><path d="M 377 127 L 377 144.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 149.88 L 373.5 142.88 L 377 144.63 L 380.5 142.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-23"><g><path d="M 377 201 L 377 217.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 222.88 L 373.5 215.88 L 377 217.63 L 380.5 215.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-2"><g><rect x="97" y="473" width="950" height="664" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 948px; height: 1px; padding-top: 805px; margin-left: 98px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">v</div></div></div></foreignObject><text x="572" y="809" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">v</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-24"><g><path d="M 377 274 L 377 290.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 295.88 L 373.5 288.88 L 377 290.63 L 380.5 288.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-25"><g><rect x="97" y="67" width="110" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 92px; margin-left: 98px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">test跳转planner模块</font></div></div></div></foreignObject><text x="152" y="96" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">test跳转planner模块</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-26"><g><rect x="787" y="151" width="80" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 176px; margin-left: 788px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';font-size:12.0000pt;mso-font-kerning:1.0000pt;"><font face="Times New Roman">UniAD\projects\mmdet3d_plugin\uniad\apis\test.py-&gt;</font></span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';color:rgb(0,0,255);font-size:12.0000pt;&lt;br/&gt;mso-font-kerning:1.0000pt;"> </span><span style="font-family: 宋体; font-size: 12pt;"><font face="Times New Roman">custom_multi_gpu_test</font><font face="宋体">函数</font></span></p></div></div></div></foreignObject><text x="827" y="180" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">UniAD\project...</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-27"><g><rect x="732" y="224" width="190" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 249px; margin-left: 733px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';font-size:12.0000pt;mso-font-kerning:1.0000pt;"><font face="Times New Roman">UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad_e2e.py-&gt;forward</font><font face="宋体">函数</font></span></p></div></div></div></foreignObject><text x="827" y="253" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">UniAD\projects\mmdet3d_plugin\u...</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-28"><g><rect x="747" y="76" width="160" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 101px; margin-left: 748px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';font-size:12.0000pt;mso-font-kerning:1.0000pt;"><font face="Times New Roman">UniAD\tools\test.py-&gt;main</font><font face="宋体">函数</font></span></p></div></div></div></foreignObject><text x="827" y="105" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">UniAD\tools\test.py-&gt;main函数</text></switch></g></g></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-29"><a xlink:href="https://www.iodraw.com/diagram/&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&#10;mso-hansi-font-family:'Times New Roman';color:rgb(0,0,0);font-size:12.0000pt;&#10;mso-font-kerning:1.0000pt;&quot;&gt;&lt;font face=&quot;Times New Roman&quot;&gt;UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad_e2e.py&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&#10;mso-hansi-font-family:'Times New Roman';font-size:12.0000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;font face=&quot;Times New Roman&quot;&gt;-&amp;gt;forward_test&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;函数&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;"><g><rect x="672" y="297" width="310" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 304px; margin-left: 673px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="font-family: 宋体; color: rgb(0, 0, 0); font-size: 12pt;"><font face="Times New Roman">UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad_e2e.py</font></span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';font-size:12.0000pt;mso-font-kerning:1.0000pt;"><font face="Times New Roman">-&gt;forward_test</font><font face="宋体">函数</font></span></p></div></div></div></foreignObject><text x="827" y="316" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">UniAD\projects\mmdet3d_plugin\uniad\detectors\uniad...</text></switch></g></g></a></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-30"><a xlink:href="https://www.iodraw.com/diagram/&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&#10;mso-hansi-font-family:'Times New Roman';color:rgb(0,0,0);font-size:12.0000pt;&#10;mso-font-kerning:1.0000pt;&quot;&gt;&lt;font face=&quot;Times New Roman&quot;&gt;UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&amp;gt;forward_test&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;函&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;"><g><rect x="747" y="380" width="200" height="90" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 387px; margin-left: 748px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="color: rgb(0, 0, 0); font-size: 12pt;"><font face="Times New Roman" style="">UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&gt;forward_test</font></span><span style="font-family: 宋体; font-size: 12pt; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));">函数</span></p></div></div></div></foreignObject><text x="847" y="399" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">UniAD\projects\mmdet3d_plugin\uni...</text></switch></g></g></a></g><g data-cell-id="H9LpD67TrQ5rv2mn7AtS-31"><a xlink:href="https://www.iodraw.com/diagram/&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&#10;mso-hansi-font-family:'Times New Roman';color:rgb(0,0,0);font-size:12.0000pt;&#10;mso-font-kerning:1.0000pt;&quot;&gt;&lt;font face=&quot;Times New Roman&quot;&gt;UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&amp;gt;forward&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;函数&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;"><g><rect x="671" y="473" width="290" height="90" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 288px; height: 1px; padding-top: 480px; margin-left: 672px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:'Times New Roman';&lt;br/&gt;mso-hansi-font-family:'Times New Roman';color:rgb(0,0,0);font-size:12.0000pt;&lt;br/&gt;mso-font-kerning:1.0000pt;"><font face="Times New Roman">UniAD\projects\mmdet3d_plugin\uniad\dense_heads\planning_head.py-&gt;forward</font><font face="宋体">函数</font></span></p></div></div></div></foreignObject><text x="816" y="492" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">UniAD\projects\mmdet3d_plugin\uniad\dense_heads\...</text></switch></g></g></a></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-1"><g><rect x="172" y="563" width="410" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 408px; height: 1px; padding-top: 593px; margin-left: 173px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:华文琥珀;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"><font style="font-size: 16px;">plan_query = torch.cat([sdc_traj_query, sdc_track_query, navi_embed], dim=-1) </font></span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:华文琥珀;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="597" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">plan_query = torch.cat([sdc_traj_query, sdc_track_query, navi_embed]...</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-3"><g><rect x="172" y="663" width="410" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 408px; height: 1px; padding-top: 693px; margin-left: 173px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"><font style="font-size: 16px;">plan_query = self.mlp_fuser(plan_query).max(1, keepdim=True)[0] </font></span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="697" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">plan_query = self.mlp_fuser(plan_query).max(1, keepdim=True)[0] </text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-4"><g><rect x="172" y="762" width="410" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 408px; height: 1px; padding-top: 792px; margin-left: 173px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal" style="font-size: 16px;"><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;">plan_query = self.attn_module( plan_query, bev_fea</span><span style="font-family: 宋体;"><font face="Times New Roman" style="font-size: 16px;">t</font></span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"> )</span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="796" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">plan_query = self.attn_module( plan_query, bev_feat )</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-5"><g><rect x="172" y="859" width="410" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 408px; height: 1px; padding-top: 889px; margin-left: 173px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal" style="font-size: 16px;"><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;">s</span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;">dc_traj_all = self.reg_branch(plan_query).view( (-1, self.planning_steps, 2))</span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="893" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">sdc_traj_all = self.reg_branch(plan_query).view( (-1, self.planning_...</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-6"><g><rect x="172" y="951" width="410" height="90" rx="13.5" ry="13.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 408px; height: 1px; padding-top: 996px; margin-left: 173px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal" style="font-size: 16px;"><font style="font-size: 16px;"><span style="font-family: &quot;Times New Roman&quot;;">if self.use_col_optim and not self.training:</span><span style="font-family: &quot;Times New Roman&quot;;"></span></font></p><p class="MsoNormal" style="font-size: 16px;"><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"><font style="font-size: 16px;">sdc_traj_all = self.collision_optimization( sdc_traj_all, occ_mask) </font></span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="1000" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">if self.use_col_optim and not self.training:...</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-7"><g><path d="M 377 446 L 377 556.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 561.88 L 373.5 554.88 L 377 556.63 L 380.5 554.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-9"><g><path d="M 377 623 L 377 656.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 661.88 L 373.5 654.88 L 377 656.63 L 380.5 654.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-10"><g><path d="M 377 723 L 377 755.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 760.88 L 373.5 753.88 L 377 755.63 L 380.5 753.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-11"><g><path d="M 377 822 L 377 852.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 857.88 L 373.5 850.88 L 377 852.63 L 380.5 850.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-12"><g><path d="M 377 919 L 377 944.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 377 949.88 L 373.5 942.88 L 377 944.63 L 380.5 942.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-13"><g><rect x="681" y="563" width="310" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 593px; margin-left: 682px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">自车轨迹+自车跟踪+导航指令=规划查询Q</font></div></div></div></foreignObject><text x="836" y="597" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">自车轨迹+自车跟踪+导航指令=规划查询Q</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-14"><g><rect x="681" y="663" width="310" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 693px; margin-left: 682px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;">规划查询Q-&gt;MLP+maxpool层</span></div></div></div></foreignObject><text x="836" y="697" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">规划查询Q-&gt;MLP+maxpool层</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-15"><g><rect x="681" y="762" width="310" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 792px; margin-left: 682px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;">规划查询Q+BEV特征-&gt;cross attention层交互</span></div></div></div></foreignObject><text x="836" y="796" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">规划查询Q+BEV特征-&gt;cross attention层交互</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-16"><g><rect x="681" y="859" width="310" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 889px; margin-left: 682px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">规划查询Q-&gt;MLP层解码轨迹</font></div></div></div></foreignObject><text x="836" y="893" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">规划查询Q-&gt;MLP层解码轨迹</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-17"><g><rect x="681" y="966" width="310" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 996px; margin-left: 682px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;">测试环节使用最优化：规划轨迹-&gt;</span><span style="font-family: &quot;Times New Roman&quot;; font-size: 16px;">collision_optimization碰撞优化函数</span></div></div></div></foreignObject><text x="836" y="1000" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">测试环节使用最优化：规划轨迹-&gt;collision_optimization碰撞优化函数</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-18"><g><rect x="309" y="1071" width="135" height="50" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 133px; height: 1px; padding-top: 1096px; margin-left: 310px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p class="MsoNormal"><span style="font-family: &quot;Times New Roman&quot;;"><font style="font-size: 16px;">sdc_traj_all</font></span><span style="mso-spacerun:'yes';font-family:'Times New Roman';mso-fareast-font-family:宋体;&lt;br/&gt;font-size:10.5000pt;mso-font-kerning:1.0000pt;"></span></p></div></div></div></foreignObject><text x="377" y="1100" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">sdc_traj_all</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-19"><g><path d="M 377 1041 L 376.79 1064.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 376.74 1069.88 L 373.3 1062.85 L 376.79 1064.63 L 380.3 1062.91 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-21"><g><rect x="107" y="487" width="110" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 512px; margin-left: 108px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">planner模块</font></div></div></div></foreignObject><text x="162" y="516" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">planner模块</text></switch></g></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-22"><g><path d="M 582 593 L 681 593" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-23"><g><path d="M 582 693 L 681 693" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-24"><g><path d="M 582 792 L 681 792" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-25"><g><path d="M 582 889 L 681 889" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/></g></g><g data-cell-id="2zAw07tLLCjVrzlMsrer-26"><g><path d="M 582 996 L 681 996" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/></g></g></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>